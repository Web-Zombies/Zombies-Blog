{
    "version": "https://jsonfeed.org/version/1",
    "title": "null",
    "description": "",
    "home_page_url": "http://xchao.work",
    "items": [
        {
            "id": "http://xchao.work/2022/04/06/computer-science/echarts/echarts%E7%BB%93%E5%90%88%E9%AB%98%E5%BE%B7API%E8%BF%9B%E8%A1%8C%E5%9C%B0%E5%9B%BE%E4%B8%8B%E9%92%BB/",
            "url": "http://xchao.work/2022/04/06/computer-science/echarts/echarts%E7%BB%93%E5%90%88%E9%AB%98%E5%BE%B7API%E8%BF%9B%E8%A1%8C%E5%9C%B0%E5%9B%BE%E4%B8%8B%E9%92%BB/",
            "title": "Echarts结合高德API进行中国地图下钻",
            "date_published": "2022-04-06T09:03:17.009Z",
            "content_html": "<h1 id=\"echarts结合高德api进行中国地图下钻\"><a class=\"markdownIt-Anchor\" href=\"#echarts结合高德api进行中国地图下钻\">#</a> Echarts 结合高德 API 进行中国地图下钻</h1>\n<h2 id=\"依赖的高德脚本\"><a class=\"markdownIt-Anchor\" href=\"#依赖的高德脚本\">#</a> 依赖的高德脚本</h2>\n<p>在 pubic 目录下面的 index.html 引入</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>script type<span class=\"token operator\">=</span><span class=\"token string\">\"text/javascript\"</span> src<span class=\"token operator\">=</span><span class=\"token string\">\"//webapi.amap.com/maps?v=1.4.15&amp;key=ff5083ffeef28d1e97be213d453572d6\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></pre></td></tr></table></figure><figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>script type<span class=\"token operator\">=</span><span class=\"token string\">\"text/javascript\"</span> src<span class=\"token operator\">=</span><span class=\"token string\">\"//webapi.amap.com/ui/1.1/main.js\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></pre></td></tr></table></figure><h2 id=\"使用到的高德组件和接口\"><a class=\"markdownIt-Anchor\" href=\"#使用到的高德组件和接口\">#</a> 使用到的高德组件和接口</h2>\n<p>利用 <span class=\"label info\">AMapUI.loadUI</span> 可以构造一个创建一个 <span class=\"label info\">DistrictExplorer</span> 实例</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 高德 api  构建 DistrictExplorer 的实例</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    window<span class=\"token punctuation\">.</span>AMapUI<span class=\"token punctuation\">.</span><span class=\"token function\">loadUI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'geo/DistrictExplorer'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">DistrictExplorer</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>       * DistrictExplorer 构建的实例</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>       */</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>districtExplorer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DistrictExplorer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>然后利用 DistrictExplorer 的实例，<span class=\"label info\">loadAreaNode</span> 方法可以根据当前需要加载城市的 adcode 获取到该城市的 geo 数据</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>districtExplorer<span class=\"token punctuation\">.</span><span class=\"token function\">loadAreaNode</span><span class=\"token punctuation\">(</span>adcode<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> areaNode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token keyword\">const</span> geoData <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\">//areaNode 对象执行这个方法返回的 geoJSON 中的 features</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        geoData<span class=\"token punctuation\">.</span>features <span class=\"token operator\">=</span> areaNode<span class=\"token punctuation\">.</span><span class=\"token function\">getSubFeatures</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token comment\">// 现在的 geoData 才是我们可以使用的 Json 文件</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>geoData<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>上边提到的 adcode，原本也是一个静态的 json 文件，这块使用高德 api ‘<span class=\"exturl\" data-url=\"aHR0cHM6Ly9yZXN0YXBpLmFtYXAuY29tL3YzL2NvbmZpZy9kaXN0cmljdD9wYXJhbWV0ZXJz\">https://restapi.amap.com/v3/config/district?parameters</span>’ 这个接口来根据城市名称获取到城市 adcode。<br>\n具体的参数可以查看<span class=\"exturl\" data-url=\"aHR0cHM6Ly9sYnMuYW1hcC5jb20vYXBpL3dlYnNlcnZpY2UvZ3VpZGUvYXBpL2Rpc3RyaWN0\">行政区域查询 - API 文档 - 开发指南 - Web 服务 API</span></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">let</span> adcode <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://restapi.amap.com/v3/config/district'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>          <span class=\"token literal-property property\">subdistrict</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>          <span class=\"token literal-property property\">keywords</span><span class=\"token operator\">:</span><span class=\"token string\">''</span><span class=\"token comment\">//, 根据名称查询 </span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>          <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 你的高德 key 值</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>         <span class=\"token keyword\">let</span> adcode <span class=\"token operator\">=</span> res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>districts<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>adcode<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>         <span class=\"token comment\">// 这就是我们根据名称查到的 adcode</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>通过以上的 api 我们就可以拿到相对应省市区的地图 Json 文件用 echarts 进行地图的渲染了。</p>\n<h2 id=\"简单的中国地图下钻实例\"><a class=\"markdownIt-Anchor\" href=\"#简单的中国地图下钻实例\">#</a> 简单的中国地图下钻实例</h2>\n<p>首先安装 echarts 依赖</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>npm install echarts</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>或者使用淘宝的镜像</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>npm install <span class=\"token operator\">-</span>g cnpm <span class=\"token operator\">--</span>registry<span class=\"token operator\">=</span>https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>registry<span class=\"token punctuation\">.</span>npm<span class=\"token punctuation\">.</span>taobao<span class=\"token punctuation\">.</span>org</pre></td></tr></table></figure><p>在 main.js 中全局引入</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 引入 echarts</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> echarts <span class=\"token keyword\">from</span> <span class=\"token string\">'echarts'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token class-name\">Vue</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>$echarts <span class=\"token operator\">=</span> echarts</pre></td></tr></table></figure><p>template</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"china_map_box\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>   <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"returRow()\"</span> v<span class=\"token operator\">-</span><span class=\"token keyword\">if</span><span class=\"token operator\">=</span><span class=\"token string\">\"code.adcodePro || code.adcodeCity\"</span><span class=\"token operator\">></span>上一级<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>   <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"china_map\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></pre></td></tr></table></figure><p>css</p>\n<figure class=\"highlight css\"><figcaption data-lang=\"CSS\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token selector\">#china_map</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 1200px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 820px<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>script</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'HelloWorld'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token function\">data</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token literal-property property\">echarts</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//echarts 实例</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token literal-property property\">districtExplorer</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//DistrictExplorer 构建的实例</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token literal-property property\">adcode</span><span class=\"token operator\">:</span> <span class=\"token string\">'100000'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 这个 adcode 是城市（国家省市区）的编号 默认 100000 中国</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token literal-property property\">code</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token literal-property property\">adcodePro</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 省</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token literal-property property\">adcodeCity</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token comment\">// 市</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token function\">mounted</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>echarts <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'echarts'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token comment\">// 高德 api  构建 DistrictExplorer 的实例</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    window<span class=\"token punctuation\">.</span>AMapUI<span class=\"token punctuation\">.</span><span class=\"token function\">loadUI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'geo/DistrictExplorer'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">DistrictExplorer</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>       * DistrictExplorer 构建的实例</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>       */</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>districtExplorer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DistrictExplorer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getGeoData</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>adcode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 根据 adcode 生成地图</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token comment\">// 地图配置 init</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token function\">getEchInit</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">adcode<span class=\"token punctuation\">,</span> geoData</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>      <span class=\"token keyword\">let</span> myChartContainer <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'china_map'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>      <span class=\"token keyword\">let</span> myChartChina <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>echarts<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>myChartContainer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>      <span class=\"token comment\">// 绘制图表</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>      <span class=\"token keyword\">let</span> optionMap <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token literal-property property\">series</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'map'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token literal-property property\">mapType</span><span class=\"token operator\">:</span> adcode<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            <span class=\"token literal-property property\">itemStyle</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>              <span class=\"token literal-property property\">normal</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>                <span class=\"token literal-property property\">borderColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'rgba(0, 0, 0, 0.2)'</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>              <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>            <span class=\"token literal-property property\">showLegendSymbol</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>            <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>              <span class=\"token literal-property property\">normal</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>                <span class=\"token literal-property property\">show</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>              <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>            <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>echarts<span class=\"token punctuation\">.</span><span class=\"token function\">registerMap</span><span class=\"token punctuation\">(</span>adcode<span class=\"token punctuation\">,</span> geoData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>      myChartChina<span class=\"token punctuation\">.</span><span class=\"token function\">setOption</span><span class=\"token punctuation\">(</span>optionMap<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>      myChartChina<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">params</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        <span class=\"token keyword\">let</span> adcode <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getadCode</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 通过高德 api 获取行政区域 adcode 编号</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getGeoData</span><span class=\"token punctuation\">(</span>adcode<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token comment\">// 根据 行政区域 adcode 编号 获取相对应的 地图 Json 数据 进行地图下钻</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token function\">getGeoData</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">adcode</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>districtExplorer<span class=\"token punctuation\">.</span><span class=\"token function\">loadAreaNode</span><span class=\"token punctuation\">(</span>adcode<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> areaNode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        <span class=\"token keyword\">const</span> geoData <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>        <span class=\"token comment\">//areaNode 对象执行这个方法返回的 geoJSON 中的 features</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>        geoData<span class=\"token punctuation\">.</span>features <span class=\"token operator\">=</span> areaNode<span class=\"token punctuation\">.</span><span class=\"token function\">getSubFeatures</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>geoData<span class=\"token punctuation\">.</span>features<span class=\"token punctuation\">.</span>length <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 最高下钻到市</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>echarts<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'china_map'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">dispose</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 销毁实例</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getEchInit</span><span class=\"token punctuation\">(</span>adcode<span class=\"token punctuation\">,</span> geoData<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    <span class=\"token comment\">// 根据地图点击 省份名称获取 行政区域 adcode 编号</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>    <span class=\"token keyword\">async</span> <span class=\"token function\">getadCode</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">keywords</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>      <span class=\"token keyword\">let</span> adcode <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>      <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://restapi.amap.com/v3/config/district'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>        <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>          <span class=\"token literal-property property\">subdistrict</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>          <span class=\"token literal-property property\">keywords</span><span class=\"token operator\">:</span> keywords<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>          <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token string\">'ff5083ffeef28d1e97be213d453572d6'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>          adcode <span class=\"token operator\">=</span> res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>districts<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>adcode<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>          <span class=\"token comment\">// 返回上一级 操作 做处理</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>adcode <span class=\"token operator\">==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">.</span>adcodeCity<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">.</span>adcodePro <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 省</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">.</span>adcodePro <span class=\"token operator\">=</span> adcode<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">.</span>adcodeCity <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token comment\">// 市</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">.</span>adcodeCity <span class=\"token operator\">=</span> adcode<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>        <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>      <span class=\"token keyword\">return</span> adcode</pre></td></tr><tr><td data-num=\"96\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>    <span class=\"token comment\">// 返回上一级操作</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre>    <span class=\"token function\">returRow</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>      <span class=\"token keyword\">let</span> adcode <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>adcode<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 默认 100000</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">.</span>adcodeCity <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// 市</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>        adcode <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">.</span>adcodePro<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">.</span>adcodeCity <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">.</span>adcodePro <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getGeoData</span><span class=\"token punctuation\">(</span>adcode<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL1dlYi1ab21iaWVzL0VjaGFydHMtQ2hpbmFNYXA=\">github 源码地址</span></p>\n",
            "tags": [
                "Echarts"
            ]
        },
        {
            "id": "http://xchao.work/2022/03/31/computer-science2/node/Day1/",
            "url": "http://xchao.work/2022/03/31/computer-science2/node/Day1/",
            "title": "Node内置模块、模块化、npm包发布",
            "date_published": "2022-03-31T02:30:54.202Z",
            "content_html": "<h1 id=\"nodejs\"><a class=\"markdownIt-Anchor\" href=\"#nodejs\">#</a> Node.js</h1>\n<p>node 中文网 <span class=\"exturl\" data-url=\"aHR0cDovL25vZGVqcy5jbi8=\">http://nodejs.cn/</span></p>\n<h2 id=\"推荐安装以及常用命令\"><a class=\"markdownIt-Anchor\" href=\"#推荐安装以及常用命令\">#</a> 推荐安装以及常用命令</h2>\n<div class=\"note info\">\n<p>node 版本管理 NVM <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vZHJlYW1zcWluL3AvMTA4ODUwODIuaHRtbA==\">下载与安装 </span><br>\nnvm ls  查看目前已经安装的版本<br>\n nvm install 10.5.0 安装指定 node 版本<br>\n nvm use 16.13.1 切换 node 版本</p>\n</div>\n<div class=\"note info\">\n<p>npm  镜像管理 NRM <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC85NGQwODRjZTY4MzQ=\">下载与安装  </span><br>\nnrm ls  查看可选的源<br>\n nrm use taobao 切换 taobao 源<br>\n nrm del <registry> 删除对应的源<br>\n nrm test npm 测试相应源的响应时间</p>\n</div>\n<h2 id=\"终端中的快捷键\"><a class=\"markdownIt-Anchor\" href=\"#终端中的快捷键\">#</a> 终端中的快捷键</h2>\n<ul>\n<li>使用 ↑ 键，可以快速定位到上一次执行的命令</li>\n<li>使用 tab 键，能够快速补全路径</li>\n<li>使用 esc 键，能够快速清空当前已输入的命令</li>\n<li>输入 cls 命令，可以清空终端</li>\n</ul>\n<h1 id=\"内置模块\"><a class=\"markdownIt-Anchor\" href=\"#内置模块\">#</a> 内置模块</h1>\n<h2 id=\"fs-文件系统模块\"><a class=\"markdownIt-Anchor\" href=\"#fs-文件系统模块\">#</a> fs 文件系统模块</h2>\n<p><span class=\"label info\">fs.readFile () 方法</span> <span class=\"grey\">用来读取指定文件中的内容</span></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 1. 导入 fs 模块，来操作文件</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 2. 调用 fs.readFile () 方法读取文件</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//    参数 1：读取文件的存放路径</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//    参数 2：读取文件时候采用的编码格式，一般默认指定 utf8</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">//    参数 3：回调函数，拿到读取失败和成功的结果  err  dataStr</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./files/cs.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> dataStr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token comment\">// 2.1 打印失败的结果</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token comment\">// 如果读取成功，则 err 的值为 null</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token comment\">// 如果读取失败，则 err 的值为 错误对象，dataStr 的值为 undefined</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">return</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'读取文件失败！'</span> <span class=\"token operator\">+</span> err<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token comment\">// 2.2 打印成功的结果</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'读取文件成功！'</span> <span class=\"token operator\">+</span> dataStr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><span class=\"label info\">fs.writeFile () 方法</span> <span class=\"grey\">用来向指定的文件中写入内容</span></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 1. 导入 fs 文件系统模块</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 2. 调用 fs.writeFile () 方法，写入文件的内容</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">//    参数 1：表示文件的存放路径</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">//    参数 2：表示要写入的内容</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">//    参数 3：回调函数</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./files/3.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ok123'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token comment\">// 2.1 如果文件写入成功，则 err 的值等于 null</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token comment\">// 2.2 如果文件写入失败，则 err 的值等于一个 错误对象</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token comment\">// console.log(err)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">return</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'文件写入失败！'</span> <span class=\"token operator\">+</span> err<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'文件写入成功！'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"path-路径模块\"><a class=\"markdownIt-Anchor\" href=\"#path-路径模块\">#</a> path 路径模块</h2>\n<p><span class=\"label info\">path.join () 方法</span> <span class=\"grey\">用来将多个路径片段拼接成一个完整的路径字符串</span></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">//__dirname 表示当前文件所处的目录</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">// console.log(__dirname)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// 注意：  ../ 会抵消前面的路径</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// const pathStr = path.join('/a', '/b/c', '../../', './d', 'e')</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// console.log(pathStr)  // \\a\\b\\d\\e</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">// fs.readFile(__dirname + '/files/1.txt')</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'./files/cs.txt'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> dataStr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">return</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>dataStr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><span class=\"label info\">path.basename () 方法</span> <span class=\"grey\">用来从路径字符串中，将文件名解析出来</span></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 定义文件的存放路径</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> fpath <span class=\"token operator\">=</span> <span class=\"token string\">'/a/b/c/index.html'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// const fullName = path.basename(fpath)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">// console.log(fullName)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// 返回: 'index.html'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">const</span> nameWithoutExt <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">basename</span><span class=\"token punctuation\">(</span>fpath<span class=\"token punctuation\">,</span> <span class=\"token string\">'.html'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>nameWithoutExt<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">// 返回: 'index'</span></pre></td></tr></table></figure><p><span class=\"label info\">path.extname () 方法</span> <span class=\"grey\">获取路径中的文件扩展名</span></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 这是文件的存放路径</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> fpath <span class=\"token operator\">=</span> <span class=\"token string\">'/a/b/c/index.html'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">const</span> fext <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">extname</span><span class=\"token punctuation\">(</span>fpath<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>fext<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// 返回: '.html'</span></pre></td></tr></table></figure><h2 id=\"http-模块\"><a class=\"markdownIt-Anchor\" href=\"#http-模块\">#</a> http 模块</h2>\n<p><span class=\"label info\">http.createServer () 方法</span><br>\n<span class=\"grey\">创建 web 服务器的基本步骤</span></p>\n<ol>\n<li>导入 http 模块</li>\n<li>创建 web 服务器实例</li>\n<li>为服务器实例绑定 request 事件，监听客户端的请求</li>\n<li>启动服务器</li>\n</ol>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 1. 导入 http 模块</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">const</span> http <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 2. 创建 web 服务器实例</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 3. 为服务器实例绑定 request 事件，监听客户端的请求</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>server<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'request'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token comment\">//req.url 是客户端请求的 URL 地址</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>url</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token comment\">//req.method 是客户端请求的 method 类型</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token keyword\">const</span> method <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>method</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token comment\">// 定义一个字符串，包含中文的内容</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token keyword\">const</span> str <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">您请求的 URL 地址是 </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>url<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token string\">，请求的 method 类型为 </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$&#123;</span>method<span class=\"token interpolation-punctuation punctuation\">&#125;</span></span><span class=\"token template-punctuation string\">`</span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token comment\">// 调用 res.setHeader () 方法，设置 Content-Type 响应头，解决中文乱码的问题</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  res<span class=\"token punctuation\">.</span><span class=\"token function\">setHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'text/html; charset=utf-8'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token comment\">//res.end () 将内容响应给客户端</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">// 4. 启动服务器</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>server<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">8080</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"20\"></td><td><pre>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'server running at http://127.0.0.1:8080'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h1 id=\"模块化的基本概念\"><a class=\"markdownIt-Anchor\" href=\"#模块化的基本概念\">#</a> 模块化的基本概念</h1>\n<p><span class=\"grey\">把代码进行模块化拆分的好处</span></p>\n<ol>\n<li>\n<p>提高了代码的复用性</p>\n</li>\n<li>\n<p>提高了代码的可维护性</p>\n</li>\n<li>\n<p>可以实现按需加载</p>\n</li>\n</ol>\n<p><span class=\"grey\">Node.js 中根据模块来源的不同，将模块分为了 3 大类，分别是</span></p>\n<ul>\n<li>内置模块（内置模块是由 Node.js 官方提供的，例如 fs、path、http 等）</li>\n<li>自定义模块（用户创建的每个 .js 文件，都是自定义模块）</li>\n<li>第三方模块（由第三方开发出来的模块，并非官方提供的内置模块，也不是用户创建的自定义模块，使用前需要先下载）</li>\n</ul>\n<p><ins>使用强大的 require () 方法，可以加载需要的内置模块、用户自定义模块、第三方模块进行使用</ins><br>\n<span class=\"label danger\">注意</span> 使用 require () 方法加载其它模块时，会执行被加载模块中的代码。</p>\n<h2 id=\"模块的加载机制\"><a class=\"markdownIt-Anchor\" href=\"#模块的加载机制\">#</a> 模块的加载机制</h2>\n<p><ins>模块在第一次加载后会被缓存。</ins></p>\n<p>这也意味着多次调用 require () 不会导致模块的代码被执行多次。 注意：不论是内置模块、用户自定义模块、还是第三方模块，它们都会优先从缓存中加载，从而提高模块的加载效率。</p>\n<p><ins>内置模块的加载优先级最高。</ins></p>\n<p>自定义模块的加载机制</p>\n<p>使用 require () 加载自定义模块时，必须指定以 ./ 或 …/ 开头的路径标识符。在加载自定义模块时，如果没有指定 ./ 或 …/  这样的路径标识符，则 node 会把它当作内置模块或第三方模块进行加载。</p>\n<p><span class=\"grey\">同时，在使用 require () 导入自定义模块时，如果省略了文件的扩展名，则 Node.js 会按顺序分别尝试加载以下的文件</span></p>\n<ol>\n<li>按照确切的文件名进行加载</li>\n<li>补全 .js 扩展名进行加载</li>\n<li>补全 .json 扩展名进行加载</li>\n<li>补全 .node 扩展名进行加载</li>\n<li>加载失败，终端报错</li>\n</ol>\n<p>第三方模块的加载机制</p>\n<p>如果传递给 require () 的模块标识符不是一个内置模块，也没有以 ‘./’ 或 ‘…/’ 开头，则 Node.js 会从当前模块的父 目录开始，尝试从 /node_modules 文件夹中加载第三方模块。</p>\n<p>如果没有找到对应的第三方模块，则移动到再上一层父目录中，进行加载，直到文件系统的根目录。</p>\n<p><span class=\"grey\">例如，假设在’C:\\Users\\itheima\\project\\foo.js’文件里调用了 require (‘tools’)，则 Node.js 会按以下顺序查找</span></p>\n<ol>\n<li>C:\\Users\\itheima\\project\\node_modules\\tools</li>\n<li>C:\\Users\\itheima\\node_modules\\tools</li>\n<li>C:\\Users\\node_modules\\tools</li>\n<li>C:\\node_modules\\tools</li>\n</ol>\n<h2 id=\"模块作用域\"><a class=\"markdownIt-Anchor\" href=\"#模块作用域\">#</a> 模块作用域</h2>\n<p><ins>和函数作用域类似，在自定义模块中定义的变量、方法等成员，只能在当前模块内被访问，这种模块级别的访问限制，叫做模块作用域。</ins></p>\n<p><ins>模块作用域的好处 防止了全局变量污染的问题</ins></p>\n<h3 id=\"向外共享模块作用域中的成员\"><a class=\"markdownIt-Anchor\" href=\"#向外共享模块作用域中的成员\">#</a> 向外共享模块作用域中的成员</h3>\n<p><span class=\"label info\">module.exports 对象</span></p>\n<p>将模块内的成员共享出去，供外界使用。 外界用 require () 方法导入自定义模块时，得到的就是 module.exports 所指向的对象。</p>\n<p><span class=\"label danger\">注意</span> 使用 require () 方法导入模块时，导入的结果，永远以 module.exports 指向的对象为准</p>\n<p><span class=\"label info\">exports 对象</span></p>\n<p>由于 module.exports 单词写起来比较复杂，为了简化向外共享成员的代码，Node 提供了 exports 对象。默认情况 下，exports 和 module.exports 指向同一个对象。最终共享的结果，还是以 <ins>module.exports 指向的对象为准</ins></p>\n<p><span class=\"label danger\">注意</span></p>\n<p>时刻谨记，require () 模块时，<ins>得到的永远是 module.exports 指向的对象</ins>：</p>\n<p>为了防止混乱，<ins>建议大家不要</ins>在同一个模块中同时使用 exports 和 module.exports</p>\n<h1 id=\"npm与包\"><a class=\"markdownIt-Anchor\" href=\"#npm与包\">#</a> npm 与包</h1>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>npm install <span class=\"token comment\">// 包的完整名称 通过 </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>npm install moment@<span class=\"token number\">2.22</span><span class=\"token number\">.2</span>  <span class=\"token comment\">//@ 符号指定具体的版本</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>npm uninstall moment <span class=\"token comment\">// 卸载指定的包</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>npm install <span class=\"token comment\">// 一次性安装所有的依赖包</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>npm i 包名 <span class=\"token operator\">-</span>g  <span class=\"token comment\">//-g 全局安装</span></pre></td></tr></table></figure><p>初次装包完成后，在项目文件夹下多一个叫做 <ins>node_modules</ins> 的文件夹和 <ins>package-lock.json</ins> 的配置文件。</p>\n<p><span class=\"label danger\">其中</span></p>\n<p>node_modules 文件夹用来存放所有已安装到项目中的包。require () 导入第三方包时，就是从这个目录中查找并加载包。</p>\n<p>package-lock.json 配置文件用来记录 node_modules 目录下的每一个包的下载信息，例如包的名字、版本号、下载地址等。</p>\n<h2 id=\"包的语义化版本规范与配置文件\"><a class=\"markdownIt-Anchor\" href=\"#包的语义化版本规范与配置文件\">#</a> 包的语义化版本规范与配置文件</h2>\n<p><span class=\"grey\">包的版本号是以 “点分十进制” 形式进行定义的，总共有三位数字，例如 2.24.0 其中每一位数字所代表的的含义如下</span></p>\n<ul>\n<li>第 1 位数字：大版本</li>\n<li>第 2 位数字：功能版本</li>\n<li>第 3 位数字：Bug 修复版本</li>\n</ul>\n<p>版本号提升的<ins>规则</ins>：只要前面的版本号增长了，则后面的版本号归零。</p>\n<p>在项目根目录中，创建一个叫做 package.json 的配置文件，即可用来记录项目中安装了哪些包。从而方便剔除 node_modules 目录之后，在团队成员之间共享项目的源代码。</p>\n<p>注意：今后在项目开发中，一定要把 node_modules 文件夹，添加到 <ins>.gitignore</ins> 忽略文件中</p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>npm init <span class=\"token operator\">-</span>y <span class=\"token comment\">// 快速创建 package.json 这个包管理配置文件</span></pre></td></tr></table></figure><p>运行 npm install 命令安装包的时候，npm 包管理工具会自动把包的名称和版本号，记录到 package.json 中</p>\n<h2 id=\"规范的包结构与开发属于自己的包\"><a class=\"markdownIt-Anchor\" href=\"#规范的包结构与开发属于自己的包\">#</a> 规范的包结构与开发属于自己的包</h2>\n<p><span class=\"grey\">一个规范的包，它的组成结构，必须符合以下 3 点要求</span></p>\n<ol>\n<li>包必须以单独的目录而存在</li>\n<li>包的顶级目录下要必须包含 package.json 这个包管理配置文件</li>\n<li>package.json 中必须包含 name，version，main 这三个属性，分别代表包的名字、版本号、包的入口。</li>\n</ol>\n<p><span class=\"grey\">初始化包的基本结构</span></p>\n<ol>\n<li>新建 itheima-tools 文件夹，作为包的根目录</li>\n<li>在 itheima-tools 文件夹中，新建如下三个文件：</li>\n</ol>\n<ul>\n<li>package.json （包管理配置文件）</li>\n<li>index.js （包的入口文件）</li>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL1JFQURNRS5tZA==\">README.md</span> （包的说明文档）</li>\n</ul>\n<ol start=\"3\">\n<li>初始化 package.json</li>\n</ol>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"code\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"index.js\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ISC\"</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ol start=\"4\">\n<li>index.js 中定义方法</li>\n<li>补充 README.md 说明文档</li>\n</ol>\n<h3 id=\"发布包\"><a class=\"markdownIt-Anchor\" href=\"#发布包\">#</a> 发布包</h3>\n<ol>\n<li>访问 <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnBtanMuY29tLw==\">https://www.npmjs.com/</span> 网站</li>\n<li>可以在终端中执行 npm login 命令依次输入用户名、密码、邮箱后，即可登录成功。</li>\n<li>将终端切换到包的根目录之后，运行 npm publish 命令，即可将包发布到 npm 上（注意：包名不能雷同）。</li>\n<li>运行 npm unpublish 包名 --force 命令，即可从 npm 删除已发布的包。</li>\n</ol>\n",
            "tags": [
                "Node.js"
            ]
        },
        {
            "id": "http://xchao.work/2022/03/29/computer-science/web/Video/",
            "url": "http://xchao.work/2022/03/29/computer-science/web/Video/",
            "title": "直播Video播放器使用记录",
            "date_published": "2022-03-29T09:49:16.191Z",
            "content_html": "<h1 id=\"vue-video-player播放器\"><a class=\"markdownIt-Anchor\" href=\"#vue-video-player播放器\">#</a> Vue-Video-Player 播放器</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL2dpdGh1Yi5zdXJtb24ubWUvdnVlLXZpZGVvLXBsYXllci8=\">Vue-Video-Player</span> <span class=\"label success\">适用于通用协议</span></p>\n<pre><code class=\"language-vue\">&lt;video-player class=&quot;video-player vjs-custom-skin&quot; ref=&quot;videoPlayer&quot; :playsinline=&quot;true&quot; :options=&quot;playerOptions&quot;&gt;\n&lt;/video-player&gt;\n</code></pre>\n<p><span class=\"rainbow\">使用简单 推荐 适用于多种业务场所 推荐使用</span></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> videoPlayer <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"vue-video-player\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> hls <span class=\"token keyword\">from</span> <span class=\"token string\">\"videojs-contrib-hls\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token string\">\"video.js/dist/video-js.css\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token literal-property property\">components</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    videoPlayer<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    hls</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token function\">data</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token literal-property property\">placeName</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token literal-property property\">playerOptions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token literal-property property\">playbackRates</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 可选的播放速度</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token literal-property property\">autoplay</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 如果为 true, 浏览器准备好时开始回放。</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token literal-property property\">muted</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认情况下将会消除任何音频。</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token literal-property property\">loop</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 是否视频一结束就重新开始。</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token literal-property property\">preload</span><span class=\"token operator\">:</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 建议浏览器在 & lt;video > 加载元素后是否应该开始下载视频数据。auto 浏览器选择最佳行为，立即开始加载视频（如果浏览器支持）</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token literal-property property\">language</span><span class=\"token operator\">:</span> <span class=\"token string\">\"zh-CN\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token literal-property property\">aspectRatio</span><span class=\"token operator\">:</span> <span class=\"token string\">\"16:9\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例   如 \"16:9\" 或 \"4:3\"）</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token literal-property property\">fluid</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 当 true 时，Video.js player 将拥有流体大小。换句话说，它将按比例缩放以适应其容器。</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token literal-property property\">sources</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>          <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"application/x-mpegURL\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 类型</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            <span class=\"token literal-property property\">src</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//url 地址</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>          <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token literal-property property\">poster</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 封面地址</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token literal-property property\">hls</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 启用 hls？</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token literal-property property\">notSupportedMessage</span><span class=\"token operator\">:</span> <span class=\"token string\">\"此视频暂无法播放，请稍后再试\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 允许覆盖 Video.js 无法播放媒体源时显示的默认信息。</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token literal-property property\">controlBar</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>          <span class=\"token literal-property property\">timeDivider</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 当前时间和持续时间的分隔符</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>          <span class=\"token literal-property property\">durationDisplay</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 显示持续时间</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>          <span class=\"token literal-property property\">remainingTimeDisplay</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 是否显示剩余时间功能</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>          <span class=\"token literal-property property\">currentTimeDisplay</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 当前时间</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>          <span class=\"token literal-property property\">volumeControl</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 声音控制键</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>          <span class=\"token literal-property property\">progressControl</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 进度条</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>          <span class=\"token literal-property property\">playToggle</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 暂停 - 播放 按钮</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>          <span class=\"token literal-property property\">fullscreenToggle</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 是否显示全屏按钮</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr></table></figure><h1 id=\"萤石云播放器\"><a class=\"markdownIt-Anchor\" href=\"#萤石云播放器\">#</a> 萤石云播放器</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL29wZW4ueXM3LmNvbS9kb2MvemgvdWlraXQvdWlraXRfamF2YXNjcmlwdC5odG1s\">zuikit-js</span> <span class=\"label success\">只适用萤石云专用协议</span></p>\n<pre><code class=\"language-vue\">&lt;div id=&quot;video-container&quot; style=&quot;width:100%;height:100%;&quot; &gt;&lt;/div&gt;\n</code></pre>\n<p><span class=\"rainbow\">安全性高 速度快 毕竟是自己的 官方提供的功能也挺全</span></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> EZUIKit <span class=\"token keyword\">from</span> <span class=\"token string\">'ezuikit-js'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre> <span class=\"token function\">data</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token literal-property property\">player</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>   <span class=\"token function\">mounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>     <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>player <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">EZUIKit<span class=\"token punctuation\">.</span>EZUIKitPlayer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>           <span class=\"token literal-property property\">autoplay</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>           <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">\"video-container\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>           <span class=\"token literal-property property\">accessToken</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 萤石云私有协议 accessToken</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>           <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>           <span class=\"token literal-property property\">template</span><span class=\"token operator\">:</span> <span class=\"token string\">\"standard\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//simple - 极简版；standard - 标准版；security - 安防版 (预览回放);voice - 语音版；</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>           <span class=\"token comment\">//footer: [\"hd\", 'fullScreen'], // 如果 template 参数不为 simple, 该字段将被覆盖</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>           <span class=\"token literal-property property\">audio</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>      <span class=\"token comment\">/* 切换播放</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>         this.player.stop ()</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>           .then (() => &#123;</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            this.player.play (res.data.records [0].connect);</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>           &#125;);</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>       */</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>   <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h1 id=\"腾讯云播放器\"><a class=\"markdownIt-Anchor\" href=\"#腾讯云播放器\">#</a> 腾讯云播放器</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3ZvbndlYi92LXRjcGxheWVy\">v-tcplayer</span> <span class=\"label success\">适用于通用协议</span></p>\n<pre><code class=\"language-vue\">&lt;VTcPlayer  ref=&quot;tcPlayer&quot; :options=&quot;audioOptions&quot; elmId=&quot;1&quot; @load=&quot;onLoad&quot; @play=&quot;onPlay&quot; @pause=&quot;onPause&quot; /&gt;\n</code></pre>\n<p><span class=\"rainbow\">使用简单 做业务的时候对我来说体验感不是很好</span></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token punctuation\">&#123;</span> VTcPlayer <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'v-tcplayer'</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token literal-property property\">components</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    VTcPlayer<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     <span class=\"token function\">data</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token comment\">// 视频地址存放对象</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token literal-property property\">audioOptions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token comment\">// 播放流</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token literal-property property\">m3u8</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token comment\">// 0.0.5 增加 </span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token literal-property property\">hlsUrl</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token comment\">//// 播放器宽度</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token comment\">//// 播放器高度</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'250'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token comment\">//poster 支持传入一个对象，在对象中可以对封面的展现样式（style）和图片地址（src）进行设置。</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token comment\">//style 支持的样式如下:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token comment\">// \tdefault: 居中并且以图片的实际分辨率进行显示。</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token comment\">// \tstretch: 拉伸铺满播放器区域，图片可能会变形。</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token comment\">// \tcover: 优先横向等比拉伸铺满播放器区域，图片某些部分可能无法显示在区域内。</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token comment\">// poster: &#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token comment\">//   \"style\": \"stretch\",</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token comment\">//   \"src\": \"https://img1.baidu.com/it/u=1576882006,3058438369&amp;fm=26&amp;fmt=auto&amp;gp=0.jpg\"</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token comment\">// &#125;,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token comment\">// 是否自动播放</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token comment\">//iOS 下 safari 浏览器，以及大部分移动端浏览器是不开放视频自动播放这个能力的</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token literal-property property\">autoplay</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token comment\">// 设置视频是否为直播类型，将决定是否渲染时间轴等控件，以及区分点直播的处理逻辑。</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token comment\">// 默认为 false</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token literal-property property\">live</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token comment\">// 事件监听回调函数</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token function-variable function\">listener</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>          <span class=\"token comment\">// 进行事件处理</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr></table></figure><h1 id=\"协议对比\"><a class=\"markdownIt-Anchor\" href=\"#协议对比\">#</a> 协议对比</h1>\n<div class=\"note default\">\n<p>EZOPEN 协议（萤石私有流）、HLS 协议（标准流）、RTMP 协议（标准流），每种协议有各自的优点和缺点。下面以功能、性能、跨平台、扩展性进行详细比较</p>\n</div>\n<table>\n<thead>\n<tr>\n<th>-</th>\n<th>HLS</th>\n<th>RTMP</th>\n<th>EZOPEN 协议</th>\n<th>萤石私有协议</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>适用性</td>\n<td>适用 WEB/H5 接入</td>\n<td>只适用 WEB 接入</td>\n<td>只适用 UIKit 接入，支持 WEB (ActiveX) 接入</td>\n<td>只适用萤石 OpenSDK 接入</td>\n</tr>\n<tr>\n<td>出流速度</td>\n<td>首次取流延时 4-10 秒</td>\n<td>首次取流延时 2-4 秒</td>\n<td>首次取流延时 1 秒</td>\n<td>首次取流延时 1 秒</td>\n</tr>\n<tr>\n<td>优势</td>\n<td>跨平台性好，支持网页直接（包括微信）播放</td>\n<td>比 HLS 延时低，且支持与第三方云进行转码、录播</td>\n<td>取流速度快，高安全性，接入简单</td>\n<td>取流速度快，高安全性，功能齐全</td>\n</tr>\n</tbody>\n</table>\n",
            "tags": [
                "Vue-Video-Player,ezuikit-js,v-tcplayer"
            ]
        },
        {
            "id": "http://xchao.work/2022/03/28/computer-science/web/BaiduMap/",
            "url": "http://xchao.work/2022/03/28/computer-science/web/BaiduMap/",
            "title": "Vue Baidu Map 百度地图的使用",
            "date_published": "2022-03-28T11:50:12.861Z",
            "content_html": "<h1 id=\"百度地图的使用\"><a class=\"markdownIt-Anchor\" href=\"#百度地图的使用\">#</a> 百度地图的使用</h1>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kYWZyb2suZ2l0aHViLmlvL3Z1ZS1iYWlkdS1tYXAvIy96aC9zdGFydC90aGlyZC1wYXJ0eQ==\">Vue Baidu Map</span><br>\n<span class=\"label warning\">:mapClick=&quot;false&quot;</span><br>\n<ins class=\"dot\"> 关闭百度地图 默认的地点点击详情效果</ins><br>\n<span class=\"label warning\">:scroll-wheel-zoom=&quot;true&quot;</span><br>\n<ins class=\"dot\"> 鼠标滚轮实现缩放地图</ins></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>baidu<span class=\"token operator\">-</span>map <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"bm-view\"</span> ak<span class=\"token operator\">=</span><span class=\"token string\">\"你的百度地图key\"</span> <span class=\"token operator\">:</span>center<span class=\"token operator\">=</span><span class=\"token string\">\"center\"</span> <span class=\"token operator\">:</span>zoom<span class=\"token operator\">=</span><span class=\"token string\">\"zoom\"</span> @ready<span class=\"token operator\">=</span><span class=\"token string\">\"handler\"</span> <span class=\"token operator\">:</span>mapClick<span class=\"token operator\">=</span><span class=\"token string\">\"false\"</span> <span class=\"token operator\">:</span>scroll<span class=\"token operator\">-</span>wheel<span class=\"token operator\">-</span>zoom<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span> <span class=\"token operator\">:</span>mapStyle<span class=\"token operator\">=</span><span class=\"token string\">\"mapStyle\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>缩放控件<span class=\"token operator\">--</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> <span class=\"token operator\">&lt;</span>bm<span class=\"token operator\">-</span>navigation anchor<span class=\"token operator\">=</span><span class=\"token string\">\"BMAP_ANCHOR_BOTTOM_RIGHT\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>bm<span class=\"token operator\">-</span>navigation<span class=\"token operator\">></span> <span class=\"token operator\">--</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>聚合动态添加的点坐标<span class=\"token operator\">--</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token operator\">&lt;</span>bm<span class=\"token operator\">-</span>marker<span class=\"token operator\">-</span>clusterer <span class=\"token operator\">:</span>averageCenter<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token operator\">&lt;</span>bm<span class=\"token operator\">-</span>marker v<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"(marker) of markers\"</span> <span class=\"token operator\">:</span>key<span class=\"token operator\">=</span><span class=\"token string\">\"marker.id\"</span> <span class=\"token operator\">:</span>icon<span class=\"token operator\">=</span><span class=\"token string\">\"&#123;url:mapIcon,size: &#123;width: 66, height: 66&#125;&#125;\"</span> <span class=\"token operator\">:</span>position<span class=\"token operator\">=</span><span class=\"token string\">\"&#123;lng: marker.lng, lat: marker.lat&#125;\"</span> <span class=\"token operator\">:</span>dragging<span class=\"token operator\">=</span><span class=\"token string\">\"false\"</span> @click<span class=\"token operator\">=</span><span class=\"token string\">\"marker.show= true\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>信息窗体<span class=\"token operator\">--</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token operator\">&lt;</span>bm<span class=\"token operator\">-</span>info<span class=\"token operator\">-</span>window <span class=\"token operator\">:</span>position<span class=\"token operator\">=</span><span class=\"token string\">\"&#123;lng: marker.lng, lat: marker.lat&#125;\"</span> <span class=\"token operator\">:</span>show<span class=\"token operator\">=</span><span class=\"token string\">\"marker.show\"</span> @close<span class=\"token operator\">=</span><span class=\"token string\">\"marker.show= false\"</span> @open<span class=\"token operator\">=</span><span class=\"token string\">\"marker.show = true\"</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>          <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>span <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"left\"</span><span class=\"token operator\">></span>投产时间<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>span <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"right\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>          <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>span <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"left\"</span><span class=\"token operator\">></span>行业类型<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>span <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"right\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>          <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>span <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"left zrr\"</span><span class=\"token operator\">></span>责任人<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>span <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"right\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>          <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>span <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"left\"</span><span class=\"token operator\">></span>联系电话<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>span <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"right\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>          <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>span <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"left\"</span><span class=\"token operator\">></span>污染物体<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>span <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"right \"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>          <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>span <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"left\"</span><span class=\"token operator\">></span>所在地址<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>span <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"right\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>bm<span class=\"token operator\">-</span>info<span class=\"token operator\">-</span>window<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>bm<span class=\"token operator\">-</span>marker<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>bm<span class=\"token operator\">-</span>marker<span class=\"token operator\">-</span>clusterer<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>baidu<span class=\"token operator\">-</span>map<span class=\"token operator\">></span></pre></td></tr></table></figure><figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\">// 百度地图 局部引用</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> mapIconPath <span class=\"token keyword\">from</span> <span class=\"token string\">\"../../../assets/images/home/mark.png\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> BaiduMap <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-baidu-map/components/map/Map.vue'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> BmNavigation <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-baidu-map/components/controls/Navigation'</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> BmMarkerClusterer <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-baidu-map/components/extra/MarkerClusterer'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> BmMarker <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-baidu-map/components/overlays/Marker'</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> BmInfoWindow <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-baidu-map/components/overlays/InfoWindow'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token literal-property property\">components</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    BaiduMap<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    BmNavigation<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    BmMarkerClusterer<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    BmMarker<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    BmInfoWindow</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token function\">data</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token comment\">// 默认的中心区域     </span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      <span class=\"token literal-property property\">center</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token literal-property property\">lng</span><span class=\"token operator\">:</span> <span class=\"token number\">112.98</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">lat</span><span class=\"token operator\">:</span> <span class=\"token number\">28.19</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"21\"></td><td><pre>      <span class=\"token comment\">// 地图缩放层级         </span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>      <span class=\"token literal-property property\">zoom</span><span class=\"token operator\">:</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      <span class=\"token literal-property property\">mapIcon</span><span class=\"token operator\">:</span> mapIconPath<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>      <span class=\"token comment\">// 地图主题</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>      <span class=\"token literal-property property\">mapStyle</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token literal-property property\">style</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dark\"</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>      <span class=\"token comment\">// 地图坐标点</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token literal-property property\">markers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>         <span class=\"token literal-property property\">code</span><span class=\"token operator\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>         <span class=\"token literal-property property\">lng</span><span class=\"token operator\">:</span> <span class=\"token string\">'112.9479'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>         <span class=\"token literal-property property\">lat</span><span class=\"token operator\">:</span> <span class=\"token string\">'28.2230'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>         <span class=\"token literal-property property\">show</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>         <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h1 id=\"注意\"><a class=\"markdownIt-Anchor\" href=\"#注意\">#</a> 注意</h1>\n<p><span class=\"label warning\">将腾讯高德地图的经纬度转换成百度地图能使用的经纬度</span></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">qqMapTransBMap</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">lng<span class=\"token punctuation\">,</span> lat</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token keyword\">let</span> x_pi <span class=\"token operator\">=</span> <span class=\"token number\">3.14159265358979324</span> <span class=\"token operator\">*</span> <span class=\"token number\">3000.0</span> <span class=\"token operator\">/</span> <span class=\"token number\">180.0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> lng<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token keyword\">let</span> y <span class=\"token operator\">=</span> lat<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token keyword\">let</span> z <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">*</span> x <span class=\"token operator\">+</span> y <span class=\"token operator\">*</span> y<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">0.00002</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>y <span class=\"token operator\">*</span> x_pi<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">let</span> theta <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">atan2</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">0.000003</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">*</span> x_pi<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">let</span> lngs <span class=\"token operator\">=</span> z <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>theta<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">0.0065</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">let</span> lats <span class=\"token operator\">=</span> z <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>theta<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">0.006</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token literal-property property\">lng</span><span class=\"token operator\">:</span> lngs<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token literal-property property\">lat</span><span class=\"token operator\">:</span> lats</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><span class=\"label warning\">将百度地图经纬度转换为腾讯 / 高德地图经纬度</span></p>\n<figure class=\"highlight js\"><figcaption data-lang=\"JavaScript\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">bMapTransQQMap</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">lng<span class=\"token punctuation\">,</span> lat</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      <span class=\"token keyword\">let</span> x_pi <span class=\"token operator\">=</span> <span class=\"token number\">3.14159265358979324</span> <span class=\"token operator\">*</span> <span class=\"token number\">3000.0</span> <span class=\"token operator\">/</span> <span class=\"token number\">180.0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> lng <span class=\"token operator\">-</span> <span class=\"token number\">0.0065</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      <span class=\"token keyword\">let</span> y <span class=\"token operator\">=</span> lat <span class=\"token operator\">-</span> <span class=\"token number\">0.006</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      <span class=\"token keyword\">let</span> z <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">*</span> x <span class=\"token operator\">+</span> y <span class=\"token operator\">*</span> y<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">0.00002</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>y <span class=\"token operator\">*</span> x_pi<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      <span class=\"token keyword\">let</span> theta <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">atan2</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">0.000003</span> <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">*</span> x_pi<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>      <span class=\"token keyword\">let</span> lngs <span class=\"token operator\">=</span> z <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">cos</span><span class=\"token punctuation\">(</span>theta<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>      <span class=\"token keyword\">let</span> lats <span class=\"token operator\">=</span> z <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">sin</span><span class=\"token punctuation\">(</span>theta<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>          <span class=\"token literal-property property\">lng</span><span class=\"token operator\">:</span> lngs<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>          <span class=\"token literal-property property\">lat</span><span class=\"token operator\">:</span> lats        </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token punctuation\">&#125;</span>   </pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><ins class=\"dot\">不然会导致位置出现偏差 因为他们 不是一套坐标体系</ins></p>\n",
            "tags": [
                "Vue Baidu Map"
            ]
        },
        {
            "id": "http://xchao.work/2022/03/26/computer-science3/music/singer/",
            "url": "http://xchao.work/2022/03/26/computer-science3/music/singer/",
            "title": "音乐",
            "date_published": "2022-03-26T09:03:03.001Z",
            "content_html": "<h1 id=\"喜欢的歌手\"><a class=\"markdownIt-Anchor\" href=\"#喜欢的歌手\">#</a> 喜欢的歌手</h1>\n<div class=\"links\"><div class=\"item\" title=\"Vicetone\" style=\"--block-color:#e9546b;\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvYXJ0aXN0P2lkPTc0NzAzMA==\" data-background-image=\"https://p1.music.126.net/kD9PJNtDT0kXoOCoII29rQ==/109951167135307880.jpg?param=180y180\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvYXJ0aXN0P2lkPTc0NzAzMA==\">Vicetone</span>\n          <p class=\"desc\">V神 & 知名荷兰双人DJ组合</p>\n          </div></div><div class=\"item\" title=\"ZeddOfficial2\" style=\"--block-color:#e9546b;\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvYXJ0aXN0P2lkPTQ2Mzc2\" data-background-image=\"https://p1.music.126.net/V0bbQIKfOKyeXNqmmIiCsw==/109951166683750410.jpg?param=180y180\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvYXJ0aXN0P2lkPTQ2Mzc2\">ZeddOfficial2</span>\n          <p class=\"desc\">知名DJ & 电子音乐制作人</p>\n          </div></div><div class=\"item\" title=\"Maroon 5\" style=\"--block-color:#e9546b;\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvYXJ0aXN0P2lkPTk2MjY2\" data-background-image=\"https://p1.music.126.net/rrAKuCwt7Xr9Om6064CIyw==/109951166116603900.jpg?param=180y180\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvYXJ0aXN0P2lkPTk2MjY2\">Maroon 5</span>\n          <p class=\"desc\">魔力红 & 美国知名流行摇滚乐团</p>\n          </div></div><div class=\"item\" title=\"林宥嘉\" style=\"--block-color:#e9546b;\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvYXJ0aXN0P2lkPTM2ODU=\" data-background-image=\"https://p1.music.126.net/DeH1T1OKwTL2bIg3l8L21A==/109951163186203713.jpg?param=180y180\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvYXJ0aXN0P2lkPTM2ODU=\">林宥嘉</span>\n          <p class=\"desc\">歌手 & 音乐制作人</p>\n          </div></div><div class=\"item\" title=\"Zombies\" style=\"--block-color:#e9546b;\"><span class=\"exturl image\" data-url=\"aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTQ5MzM1MzAzNQ==\" data-background-image=\"https://p1.music.126.net/te-eDSi21NicUGGWIlrdRw==/109951163686519212.jpg?param=180y180\"></span>\n          <div class=\"info\">\n          <span class=\"exturl title\" data-url=\"aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTQ5MzM1MzAzNQ==\">Zombies</span>\n          <p class=\"desc\">啥也不是</p>\n          </div></div></div>\n",
            "tags": []
        }
    ]
}